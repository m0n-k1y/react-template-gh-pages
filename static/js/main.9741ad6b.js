!function(e){function t(t){for(var n,c,l=t[0],i=t[1],s=t[2],m=0,d=[];m<l.length;m++)c=l[m],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&d.push(r[c][0]),r[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(u&&u(t);d.length;)d.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,l=1;l<a.length;l++){var i=a[l];0!==r[i]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},r={0:0},o=[];function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="./";var l=this["webpackJsonpmulti-tabs-admin"]=this["webpackJsonpmulti-tabs-admin"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=i;o.push([587,1]),a()}({1261:function(e,t,a){},1262:function(e,t,a){"use strict";a.r(t);var n=a(15),r=a.n(n),o=(a(588),a(7)),c=a(43),l=a(0),i=a.n(l),s=a(6),u=a.n(s),m=a(152),d=a(541),p=a(108),f=a(542),h=a.n(f),b=a(177),y=a(113),g=a(544),v=a.n(g),E=Object(p.b)("demo/fetch-data",function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout((function(){return e({data:t})}),200)}));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(p.c)({name:"tab",initialState:{curTab:[],reloadPath:"null"},reducers:{setTabs:function(e,t){e.curTab=t.payload},setCurrentTab:function(e,t){e.currentTab=t.payload},setReloadPath:function(e,t){e.reloadPath=t.payload}},extraReducers:function(e){e.addCase(E.pending,(function(e){e.status="loading"})).addCase(E.fulfilled,(function(e,t){e.status="idle",e.currentTab=t.payload}))}}),k=j.actions,x=k.setTabs,S=(k.setCurrentTab,k.setReloadPath),O=function(e){return e.tab.curTab},w=function(e){return e.tab.reloadPath},C=j.reducer,I=Object(p.c)({name:"user",initialState:{UserInfo:{username:"",displayName:"",permission:[],token:null,is_oidc_user:!1}},reducers:{setUserInfo:function(e,t){e.UserInfo=t.payload}}}),M=I.actions.setUserInfo,N=function(e){return e.user.UserInfo},L=I.reducer,T=Object(p.c)({name:"app",initialState:{collapsed:!1,theme:"dark",menuMode:"horizontal"},reducers:{setTheme:function(e,t){e.theme=t.payload},setCollapsed:function(e,t){e.collapsed=t.payload},setMenuMode:function(e,t){e.menuMode=t.payload}}}),A=T.actions,z=A.setCollapsed,P=A.setTheme,D=A.setMenuMode,W=function(e){return e.app.theme},F=function(e){return e.app.collapsed},R=function(e){return e.app.menuMode},_=T.reducer,H=Object(b.a)({tab:C,user:L,app:_}),K={key:"root",storage:h.a},U=Object(y.g)(K,H),Y=Object(p.a)({reducer:U,devTools:!1,middleware:function(e){return e({serializableCheck:{ignoredActions:[y.a,y.f,y.b,y.c,y.d,y.e]}}).concat([v.a])}}),J=Object(y.h)(Y),B=a(583),G=a(211),V=a.n(G),Q=(a(604),a(105)),Z=a(106),q=a(374),X=Object(Q.a)((function e(){Object(Z.a)(this,e)}));X.stsAuthority="https://demo.identityserver.io/",X.clientId="interactive.public",X.clientRoot="http://localhost:4200/",X.clientScope="openid profile email api",X.apiRoot="https://demo.identityserver.io/api/";var $={authority:X.stsAuthority,client_id:X.clientId,redirect_uri:"".concat(X.clientRoot,"signin-callback.html"),silent_redirect_uri:"".concat(X.clientRoot,"silent_renew.html"),post_logout_redirect_uri:"".concat(X.clientRoot),response_type:"code",scope:X.clientScope,loadUserInfo:!0,
//! audience: "https://example.com",
//! responseType: "id_token token", //(string, default: 'id_token'): The type of response desired from the OIDC provider.
includeIdTokenInSilentRenew:!1,userStore:new q.WebStorageStateStore({store:window.localStorage})},ee=new q.UserManager($),te=function(e){var t=e.role||e.roles||[];return"string"==typeof t&&(t=t.replace(" ",",").split(",")),t},ae=function(e,t){return Promise.race([e(),new Promise((function(e,a){return setTimeout(a,t)}))])};function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:t.profile.given_name||t.profile.name,displayName:t.profile.preferred_username||t.profile.given_name,token:t.access_token,is_oidc_user:!0,roleList:te(t.profile)},e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(c.a)(r.a.mark((function e(t){var a,n,o,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:ne,n=c.length>2&&void 0!==c[2]?c[2]:5e3,e.next=4,ae((function(){return ee.signinRedirect()}),n);case 4:if(o=e.sent,!t){e.next=16;break}if(e.t0=t,!o){e.next=13;break}return e.next=10,a(o);case 10:e.t1=e.sent,e.next=14;break;case 13:e.t1=null;case 14:e.t2=e.t1,(0,e.t0)(e.t2);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(c.a)(r.a.mark((function e(t){var a,n,o,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:ne,n=c.length>2&&void 0!==c[2]?c[2]:5e3,e.next=4,ae((function(){return ee.getUser()}),n);case 4:if(o=e.sent,e.t0=t,!o){e.next=12;break}return e.next=9,a(o);case 9:e.t1=e.sent,e.next=13;break;case 12:e.t1=null;case 13:e.t2=e.t1,(0,e.t0)(e.t2);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return ue.apply(this,arguments)}function ue(){return(ue=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ae((function(){return ee.signoutRedirect()}),2e3));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var me=a(56),de=a(33),pe=(a(605),a(586)),fe=(a(301),a(111)),he=a(75),be=a(17),ye=a(50),ge=(a(225),a(34)),ve=a(1268),Ee=Object(ve.a)({scriptUrl:"//at.alicdn.com/t/font_1830242_6vhnrbj73u5.js"}),je=a(13),ke=(a(382),a(220)),xe=a(1274),Se=a(1275),Oe=a(1276),we=a(1277),Ce=a(1278),Ie=a(1279),Me=a(1280),Ne=(a(383),a(112)),Le=(a(384),a(65)),Te=(a(615),a(298)),Ae=(a(618),a(297)),ze=a(1269),Pe=a(1270),De=Ae.a.Countdown,We=Date.now()+1728e5+3e4,Fe=function(){return i.a.createElement("div",{className:"home",style:{height:"100vh",padding:20}},i.a.createElement(Ne.a,{gutter:16},i.a.createElement(Le.a,{span:12},i.a.createElement(Te.a,null,i.a.createElement(Ae.a,{title:"Active",value:11.28,precision:2,valueStyle:{color:"#3f8600"},prefix:i.a.createElement(ze.a,null),suffix:"%"}))),i.a.createElement(Le.a,{span:12},i.a.createElement(Te.a,null,i.a.createElement(Ae.a,{title:"Idle",value:9.3,precision:2,valueStyle:{color:"#cf1322"},prefix:i.a.createElement(Pe.a,null),suffix:"%"})))),i.a.createElement(Ne.a,{gutter:16},i.a.createElement(Le.a,{span:24,style:{marginTop:20}},i.a.createElement(Te.a,null,i.a.createElement(De,{title:"Day Level",value:We,format:"D 天 H 时 m 分 s 秒"})))))},Re=function(){return i.a.createElement("div",null,i.a.createElement("h1",null,"WorkSpace"))},_e=(a(658),a(584)),He=function(){return i.a.createElement(_e.a,{style:{height:"100vh"},status:"403",title:"403",subTitle:"抱歉，您无权访问此页面，如有疑问请联系管理员！"})},Ke=(a(236),a(153)),Ue=(a(84),a(22)),Ye=(a(1264),a(581)),Je=function(e,t){var a=function(e){var t=Object(l.useState)(!1),a=Object(be.a)(t,2),n=a[0],r=a[1],o=Object(l.useState)(null),c=Object(be.a)(o,2),i=c[0],s=c[1],u=Object(l.useState)(null),m=Object(be.a)(u,2),d=m[0],p=m[1];return[Object(l.useCallback)((function(t){r(!0),s(null),e(t).then((function(e){r(!1),p(e)})).catch((function(){r(!1)}))}),[e]),{loading:n,error:i,response:d}]}(e),n=Object(be.a)(a,2),r=n[0],o=n[1],c=o.loading,i=o.error,s=o.response;return Object(l.useEffect)((function(){return r(t),function(){}}),[r,t]),{loading:c,error:i,response:s}},Be=(a(315),a(52)),Ge=Object(l.forwardRef)((function(e,t){var a=e.config,n=e.handleSearch,r=e.beforeSearch,o=e.onFieldsChange,c=Be.a.useForm(),s=Object(be.a)(c,1)[0],u=a.reduce((function(e,t){return Object(je.a)(Object(je.a)({},e),{},Object(he.a)({},t.key,t.initialValue))}),{});return Object(l.useImperativeHandle)(t,(function(){return{resetFields:function(e){return e?s.resetFields(Object(ye.a)(e)):s.resetFields()}}})),i.a.createElement(Be.a,{form:s,initialValues:u,onFieldsChange:o,layout:"inline",onFinish:function(e){r(e),n(e)},style:{marginBottom:10}},a.map((function(e){return i.a.createElement(Be.a.Item,{key:e.key,name:e.key,rules:e.rules,style:{marginBottom:"6px"}},e.slot)})),i.a.createElement(Be.a.Item,null,i.a.createElement(Ue.a,{htmlType:"submit",type:"primary"},"搜索")))}));Ge.defaultProps={beforeSearch:function(){},onFieldsChange:function(){}};var Ve=Ge,Qe=Object(l.forwardRef)((function(e,t){var a=Object(l.useRef)(null),n=e.columns,r=e.apiFun,o=e.searchConfigList,c=e.extraProps,s=e.rowKey,u=e.rowClassName,m=e.small,d=e.showHeader,p=e.extraPagation,f=e.beforeSearch,h=e.onSelectRow,b=e.onFieldsChange,y=e.sortConfig,g=e.expandedRowRender,v=e.onExpand,E=o.reduce((function(e,t){return Object.assign(e,Object(he.a)({},t.key,t.fn?t.fn(t.initialValue):t.initialValue))}),{}),j=Object(je.a)(Object(je.a)(Object(je.a)({},E),c),{},{pageNum:1,pageSize:20}),k=Object(l.useState)([]),x=Object(be.a)(k,2),S=x[0],O=x[1],w=Object(l.useState)(j),C=Object(be.a)(w,2),I=C[0],M=C[1],N=Object(l.useState)(E),L=Object(be.a)(N,2),T=L[0],A=L[1],z=Object(l.useState)({}),P=Object(be.a)(z,2),D=P[0],W=P[1],F=Object(l.useState)(j.pageNum),R=Object(be.a)(F,2),_=R[0],H=R[1],K=Object(l.useState)(j.pageSize),U=Object(be.a)(K,2),Y=U[0],J=U[1],B=Je(r,I),G=B.loading,V=void 0!==G&&G,Q=B.response||{},Z=Q.rows,q=void 0===Z?[]:Z,X=Q.total,$=void 0===X?-1:X,ee=function(e){O([]);var t=e||_,a=1===e?{}:Object(je.a)(Object(je.a)({},T),D);H(t),M(Object(je.a)(Object(je.a)(Object(je.a)({},j),a),{},{pageNum:t,pageSize:Y}))},te={selectedRowKeys:S,onChange:function(e,t){O(e),h(e,t)}},ae=h?{rowSelection:te}:{},ne=g?{expandedRowRender:g,onExpand:v,rowClassName:u}:{},re=m?"small":"middle",oe=m?"small":"default";return Object(l.useImperativeHandle)(t,(function(){return{update:function(e){ee(e)},resetForm:function(e){a.current&&a.current.resetFields(),A({}),ee(e)},resetField:function(e){return e?a.current.resetFields(Object(ye.a)(e)):a.current.resetFields()},getTableData:function(){return q}}})),i.a.createElement("div",null,o.length>0&&i.a.createElement(Ve,{ref:a,config:o,beforeSearch:f,handleSearch:function(e){A(e),M(Object(je.a)(Object(je.a)(Object(je.a)({},I),e),{},{pageNum:1}))},onFieldsChange:b}),i.a.createElement(Ye.a,Object.assign({},ae,ne,{rowKey:s,loading:V,dataSource:q,columns:n,onChange:function(e,t,a){var n=y?y(a):{};W(n);var r=e.current,o=e.pageSize;H(r),J(o),M(Object(je.a)(Object(je.a)(Object(je.a)(Object(je.a)({},j),T),n),{},{pageNum:r,pageSize:o}))},size:re,showHeader:d,pagination:{size:oe,total:$,pageSize:I.pageSize,current:I.pageNum,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["20","50","100","200"].concat(Object(ye.a)(p)),showTotal:function(e){return"共 ".concat(e," 条")}}})))}));Qe.defaultProps={searchConfigList:[],ref:null,extraProps:{},rowKey:"id",rowClassName:"",small:!1,showHeader:!0,extraPagation:[],beforeSearch:function(){},onSelectRow:function(){},onFieldsChange:function(){},sortConfig:function(){},expandedRowRender:null,onExpand:function(){}};var Ze=Qe,qe=(a(401),a(134)),Xe=qe.a.Option,$e=function(e){var t=e.data,a=e.placeholder,n=void 0===a?"请输入搜索条件":a,r=e.value,o=e.onChange,c=void 0===o?function(){}:o,l=e.width,s=void 0===l?"100%":l,u=e.disabled,m=e.onSearch,d=e.defaultValue;return i.a.createElement(qe.a,{allowClear:!0,disabled:u,onChange:function(e){c(e)},optionFilterProp:"children",placeholder:n,showSearch:!0,style:{width:s},value:r?"".concat(r):r,onSearch:m,defaultValue:d},t.map((function(e){return i.a.createElement(Xe,{key:e.key,title:e.name,value:e.key},e.name)})))},et=(a(163),a(51)),tt=a(559),at=a.n(tt).a.create({timeout:6e5,headers:{"Content-Type":"application/json"}}),nt=new me.a({}),rt=function(){Y.dispatch({type:"SET_USERINFO",payload:{}}),nt.history.replace({pathname:"/login"})};at.interceptors.request.use((function(e){var t=(Y.getState().user.UserInfo||{}).token,a=void 0===t?"":t;return e.headers.token=a,e}),(function(e){return Promise.reject(e)})),at.interceptors.response.use((function(e){var t,a=e.data;return(null===(t=a.results)||void 0===t?void 0:t.length)?Promise.resolve({rows:a.results,total:a.results.length}):a?Promise.resolve(a):Promise.reject(e)}),(function(e){try{JSON.stringify(e).includes("403")&&rt()}catch(e){rt()}return et.a.destroy(),et.a.error("请求失败"),Promise.reject(e)})),at.post=function(e,t){return at({method:"post",url:e,data:t})},at.get=function(e,t){return at({method:"get",url:e,params:t})};var ot=at,ct={getList:function(e){return ot.get("https://randomuser.me/api",e)}},lt=function(){var e=Object(l.useRef)(),t=Object(de.e)(),a=function(){t.push("/user/list/add")},n=function(){t.push("/user/list/edit?id=666")},r=function(){return i.a.createElement(Ue.a,{className:"fr",onClick:a,type:"primary"},"新增用户")},o=[{key:"name",slot:i.a.createElement(Ke.a,{placeholder:"name",allowClear:!0}),rules:[],initialValue:"this is a demo🤓"},{key:"gender",slot:i.a.createElement($e,{data:[{name:"male",key:"male"},{name:"female",key:"female"}],placeholder:"gender"})}],c=[{title:"avatar",dataIndex:"picture",render:function(e){return i.a.createElement("span",{onClick:function(){return t=e.thumbnail,Yt(i.a.createElement("img",{src:t,width:"100%",alt:""}));var t}},i.a.createElement("img",{src:e.thumbnail,width:"40",alt:""}))},width:"3%"},{title:"name",dataIndex:"name",render:function(e){return"".concat(e.first," ").concat(e.last)}},{title:"gender",dataIndex:"gender"},{title:"email",dataIndex:"email",sorter:!0},{title:"操作",dataIndex:"operations",align:"center",render:function(){return i.a.createElement(i.a.Fragment,null,Ut("user:list:edit")&&i.a.createElement(Ue.a,{className:"btn",onClick:n,size:"small"},"编辑"))}}];return i.a.createElement(i.a.Fragment,null,Ut("user:list:add")&&i.a.createElement(r,null),i.a.createElement(Ze,{apiFun:ct.getList,columns:c,ref:e,onSelectRow:function(e){console.log("rowKeys: ",e)},searchConfigList:o,extraProps:{results:10}}))},it=(a(314),a(179)),st=(a(822),a(569)),ut={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:17}}},mt={xs:{span:24,offset:0},sm:{span:16,offset:3}},dt=(a(1265),a(582)),pt=a(1271),ft=a(1272),ht=function(e){var t=Object(l.useState)(!1),a=Object(be.a)(t,2),n=a[0],r=a[1],o=e.onChange,c=e.value,s=e.accept,u=void 0===s?["jpg","jpeg","png","gif"]:s,m=e.size,d=void 0===m?5:m,p=e.action,f=void 0===p?"/api/common/upload":p,h=n?i.a.createElement(pt.a,null):i.a.createElement(ft.a,null),b=function(){},y={action:f,onStart:function(){r(!0),o(void 0)},customRequest:function(e){var t=e.file,a=e.filename,n=u.some((function(e){return t.type.includes(e)})),c=t.size/1024/1024<d;if(!n||!c)return et.a.error("请上传正确文件"),!1;var l=new FormData;return l.append(a,t),ot.post(f,l).then((function(e){var t;t=e.path,r(!1),o(t)})).catch(b),{abort:function(){}}}};return i.a.createElement(dt.a,Object.assign({className:"avatar-uploader",listType:"picture-card",showUploadList:!1},y),c?i.a.createElement("img",{alt:"",src:c,style:{maxWidth:"100%"}}):h)},bt=(a(836),a(296)),yt=a.n(bt),gt=a(568),vt=a.n(gt);function Et(){return(Et=Object(c.a)(r.a.mark((function e(t,a){var n,o,c,l,i,s,u,m,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct.getList();case 2:return n=e.sent,o=n.accessKeyId,c=n.accessKeySecret,l=n.securityToken,i=n.bucketName,s=function(){return new vt.a({region:"oss-cn-hangzhou",accessKeyId:o,accessKeySecret:c,stsToken:l,bucket:i})},u=function(e,t){return"/".concat(e,"/").concat(V()().format("YYYYMMDD"),"/").concat(+new Date,".").concat(t.type.split("/")[1])},m={progress:function(e){t(e)}},d=function(e,t){et.a.loading({content:"上传中...",key:"updatable",duration:0});var a=u(e,t);return new Promise((function(e,n){s().multipartUpload(a,t,m).then((function(t){e(t)})).catch((function(e){n(e)}))}))},e.abrupt("return",d("videos",a));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jt=function(e){var t=e.value,a=e.onChange,n=e.uploadType,r=["separator",{key:"view-html",type:"button",title:"点击查看html内容",text:"查看html",onClick:function(){(0,ke.a.info)({width:"60%",icon:!1,title:"当前内容的html",maskClosable:!0,okText:"关闭",content:yt.a.createEditorState(t).toHTML()})}}];return i.a.createElement(yt.a,{controls:["fullscreen","separator","undo","redo","separator","font-size","line-height","letter-spacing","separator","text-color","bold","italic","underline","strike-through","hr","separator","superscript","subscript","remove-styles","emoji","separator","text-indent","text-align","separator","headings","list-ul","list-ol","blockquote","code","separator",{key:"media",title:"上传大小规范：图片不超过5M，视频不超过100M",text:"上传图片/视频（图片不超过5M，视频不超过100M）"},"separator","link","separator","clear"],media:{uploadFn:function(e){var t=function(t){et.a.destroy(),et.a.success({content:"上传成功!",key:"updatable",duration:2}),e.success({url:t.path,meta:{loop:!0,autoPlay:!0,controls:!0}})},a=function(t){et.a.destroy(),et.a.error("上传失败"),e.error({msg:t})};if("video"!==n){var r=new FormData;r.append("file",e.file),et.a.loading({content:"上传中...",key:"updatable",duration:0}),ot.post("/api/common/upload",r).then((function(e){t(e)})).catch(a)}else(function(e,t){return Et.apply(this,arguments)})((function(t){e.progress(100*t)}),e.file).then((function(e){var a={path:"https://xxx.oss-accelerate.aliyuncs.com".concat(e.name)};t(a)})).catch(a)},validateFn:function(e){return e.type.includes("image")&&e.size>512e4?(et.a.error("图片上传文件大小超出限制（10M）"),!1):!(e.type.includes("video")&&e.size>1024e5)||(et.a.error("视频上传文件大小超出限制（100M）"),!1)},accepts:{image:"image/png, image/jpeg, image/gif",video:"video/mp4"}},value:yt.a.createEditorState(t),onChange:a,extendControls:r,style:{border:"solid 1px rgba(0,0,0,.2)"}})},kt=function(){var e=Kt().id,t=Be.a.useForm(),a=Object(be.a)(t,1)[0],n=a.setFieldsValue,o=a.resetFields,s=Object(l.useState)(!1),u=Object(be.a)(s,2),m=u[0],d=u[1],p=Object(de.e)();Object(l.useEffect)((function(){e?n({name:"Jacob Jørgensen",gender:"male",avatar:"https://randomuser.me/api/portraits/thumb/men/84.jpg",content:"jacob.jorgensen@example.com",status:Math.random()>.5}):o()}),[e,o,n]);var f;return i.a.createElement(it.a,{spinning:m},i.a.createElement(Be.a,Object.assign({},ut,{form:a,onFinish:function(){d(!0),setTimeout((function(){d(!1),et.a.success("修改成功");Ht(p,"/user/list")}),1e3)}}),i.a.createElement(Be.a.Item,{label:"名称",name:"name",rules:[{required:!0,message:"请输入名称"}]},i.a.createElement(Ke.a,{placeholder:"请输入名称"})),i.a.createElement(Be.a.Item,{label:"性别",name:"gender",rules:[{required:!0,message:"请选择性别"}]},i.a.createElement($e,{data:[{key:"male",name:"male"},{key:"female",name:"female"}],placeholder:"请选择性别"})),i.a.createElement(Be.a.Item,{label:"头像",name:"avatar",extra:i.a.createElement("span",null,"只支持",i.a.createElement("b",null,"JPG、PNG、GIF"),"，大小不超过",i.a.createElement("b",null,"5M"))},i.a.createElement(ht,null)),i.a.createElement(Be.a.Item,{label:"描述",name:"content",rules:[{validator:(f=Object(c.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("<p></p>"!==(n=a.toHTML())&&n){e.next=3;break}throw new Error("请输入内容");case 3:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)})}]},i.a.createElement(jt,null)),i.a.createElement(Be.a.Item,{label:"状态",name:"status",valuePropName:"checked"},i.a.createElement(st.a,{checkedChildren:"开启",unCheckedChildren:"禁用"})),i.a.createElement(Be.a.Item,{wrapperCol:mt},i.a.createElement(Ue.a,{type:"primary",htmlType:"submit"},"提交"))))},xt=Object(de.g)((function(){var e=Object(l.useRef)(),t=[{title:"avatar",dataIndex:"picture",align:"center",render:function(e){return i.a.createElement("span",{onClick:function(){return t=e.thumbnail,Yt(i.a.createElement("img",{src:t,width:"100%",alt:""}));var t}},i.a.createElement("img",{src:e.thumbnail,width:"40",alt:""}))}},{title:"name",dataIndex:"name",align:"center",render:function(e){return"".concat(e.first," ").concat(e.last)}},{title:"gender",dataIndex:"gender",align:"center"},{title:"phone",align:"center",dataIndex:"phone"},{title:"cell",align:"center",dataIndex:"cell",sorter:!0}];return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ze,{apiFun:ct.getList,columns:t,ref:e,extraProps:{results:10}}))})),St=(a(942),a(379)),Ot=(a(453),a(221)),wt=a(1273),Ct=function(){return Object(m.c)()},It=m.d,Mt=Ot.a.Text,Nt=function(){var e=It(N),t=Object(de.e)(),a=e.username,n=e.permission,r=Ct();return i.a.createElement(i.a.Fragment,null,i.a.createElement(Mt,{style:{margin:20}},"当前用户：",i.a.createElement(Mt,{code:!0},a)),i.a.createElement("br",null),i.a.createElement(Mt,{style:{margin:20}},"当前权限：",i.a.createElement(wt.a,null)),i.a.createElement(St.b,{size:"large",footer:i.a.createElement(Ue.a,{type:"primary",onClick:function(){var t=Object(je.a)(Object(je.a)({},e),{},{permission:5===n.length?[{code:"user:list:view",name:"查看用户列表"},{code:"user:list:edit",name:"编辑用户列表"},{code:"auth:test:view",name:"查看权限测试页"}]:[{code:"user:list:view",name:"查看用户列表"},{code:"user:list:add",name:"新增用户列表"},{code:"user:list:edit",name:"编辑用户列表"},{code:"role:list:view",name:"查看角色列表"},{code:"auth:test:view",name:"查看权限测试页"}]});r(M(t))}},"切换权限"),bordered:!0,dataSource:n,renderItem:function(e){return i.a.createElement(St.b.Item,null,e.name," - ",e.code)},style:{margin:20}}),i.a.createElement(Ue.a,{onClick:function(){return t.push("/role/list")},style:{margin:20}},"切换权限后，点击这里，访问【角色列表】试试"))},Lt=(a(952),a(576));function Tt(e,t){switch(t.type){case"loading":return Object(je.a)(Object(je.a)({},e),{},{loading:!0});case"response":return Object(je.a)(Object(je.a)({},e),{},{loading:!1,data:t.data});case"error":return Object(je.a)(Object(je.a)({},e),{},{loading:!1,error:t.error});default:return e}}var At=a(575),zt=a.n(At),Pt=Ot.a.Text,Dt=Ot.a.Title,Wt=function(e){var t=e.apiUrl,a=e.placeHolder,n=e.title,r=e.slice,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(l.useReducer)(Tt,{data:null,loading:!1,error:null}),n=Object(be.a)(a,2),r=n[0],o=r.loading,c=r.error,i=r.data,s=n[1],u=JSON.stringify(t);return Object(l.useEffect)((function(){s({type:"loading"}),fetch(e,JSON.parse(u)).then((function(e){return console.log(e.status,e.statusText),e.json()})).then((function(e){return s({type:"response",data:e})})).catch((function(e){return s({type:"error",error:e})}))}),[e,u]),{loading:o,error:c,data:i}}(t),c=o.loading,s=o.error,u=o.data,m=void 0!==r?null==u?void 0:u.slice.apply(u,Object(ye.a)([r].flat())):u,d=a||"Fetching data...";return c?i.a.createElement(Dt,{type:"warning"},d):s?i.a.createElement("div",null,i.a.createElement(Dt,null,n||"API mocking example"),i.a.createElement(Pt,{type:"danger"},"Error: ",s.message||s),i.a.createElement("div",null,"Refresh the page if this error is unintentional.")):i.a.createElement("div",{className:"App"},i.a.createElement(Dt,null,n||"API mocking example"),i.a.createElement("h2",null,i.a.createElement(Pt,{type:"secondary"},"请求".concat(t))),i.a.createElement(zt.a,{src:m,name:null,theme:"monokai",collapsed:2}),i.a.createElement("p",null,i.a.createElement("small",null,"编辑 ",i.a.createElement("code",null,"src/mocks"),"下的文件(热更新/热替换),修改模拟API.")))},Ft=[{path:"/",name:"首页",exact:!0,key:"home",icon:xe.a,component:Fe},{path:"/workspace",name:"工作台",exact:!0,key:"workspace",component:Re,icon:Se.a},{path:"/user",name:"用户管理",key:"user",type:"subMenu",icon:Oe.a,iconfont:"icon-xiaoshouzongjian",routes:[{path:"/user/list",name:"用户列表",exact:!0,key:"user:list:view",component:lt},{path:"/user/list/add",name:"新增用户",exact:!0,key:"user:list:add",component:kt},{path:"/user/list/edit",name:"编辑用户",exact:!0,key:"user:list:edit",hideInMenu:!0,component:kt}]},{path:"/role",name:"角色管理",key:"role",type:"subMenu",icon:we.a,routes:[{path:"/role/list",name:"角色列表",exact:!0,key:"role:list:view",component:xt}]},{path:"/auth",name:"权限测试页",exact:!0,key:"auth:test:view",icon:Ce.a,component:Nt},{path:"/test-api",name:"测试api",exact:!0,key:"/test-api",icon:Ie.a,component:function(){return i.a.createElement("div",null,i.a.createElement("h1",null,"API mocking "),i.a.createElement(Dt,{level:2},"同时有mock,proxy和真实api的情况下,响应优先级顺序:"),i.a.createElement(Lt.a,{direction:"vertical"},i.a.createElement(Pt,null,"1.msw模拟"),i.a.createElement(Pt,null,"2.proxy反向代理"),i.a.createElement(Pt,null,"3.直接请求")),i.a.createElement(Wt,{apiUrl:"https://jsonplaceholder.typicode.com/users",slice:[0,2],title:"case1: 直接访问外部Api",placeHolder:"case1: 加载中.."}),i.a.createElement(Wt,{apiUrl:"/external-api/users",title:"case2:外部Api代理 https://jsonplaceholder.typicode.com/users",slice:[1,3],placeHolder:"case2: 加载中.."}),i.a.createElement(Wt,{apiUrl:"/api/people",title:"case3:内部代理-此处指向不可用的代理,故不可用",placeHolder:"case3: 加载中.."}),i.a.createElement(Wt,{apiUrl:"/people",title:"case4: msw代理",placeHolder:"case4: 加载中.."}))}},{path:"/403",name:"暂无权限",exact:!0,key:"/403",icon:Me.a,component:He}],Rt=function e(t){return t.reduce((function(t,a){return Array.isArray(a.routes)&&t.push(a),t.concat(Array.isArray(a.routes)?e(a.routes):a)}),[])},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/403",t=e.split("?")[0],a=Rt(Ft).filter((function(e){return e.path.includes(t)}));if(!a[0])return{title:"暂无权限",tabKey:"403",component:He};var n=a[0],r=n.name,o=n.key,c=n.component;return{title:r,tabKey:o,component:c}},Ht=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",a=arguments.length>2?arguments[2]:void 0,n=Y.getState().tab.curTab,r=window.location.href,o=r.split("#")[1],c=n.slice(),l=c.findIndex((function(e){return e===o}));c.splice(l,1),c.includes(t)||c.push(t),Object(m.b)((function(){Y.dispatch(x(c)),Y.dispatch(S(t)),setTimeout((function(){Y.dispatch(S("null"))}),500)})),"function"==typeof a?a():e.push({pathname:t})},Kt=function(){var e=window.location.href.split("?");return e[1]?decodeURI(e[1]).split("&").reduce((function(e,t){var a=t.split("=");return Object(je.a)(Object(je.a)({},e),{},Object(he.a)({},a[0],a[1]))}),{}):{}},Ut=function(e){return!!(Y.getState().user.UserInfo.permission||[]).find((function(t){return t.code===e}))},Yt=function(e){ke.a.info({title:"预览",icon:!1,okText:"关闭",maskClosable:!0,content:e})},Jt=a(289),Bt=a.n(Jt),Gt=a(377),Vt=a.n(Gt),Qt=(fe.a.Header,ge.a.SubMenu),Zt=Rt(Ft),qt=function(e){e.menuMode;var t=It(N),a=It(F),n=It(W),r=Object(de.f)().pathname,o=_t(r).tabKey,c=void 0===o?"home":o,s=Object(l.useState)(c),u=Object(be.a)(s,2),m=u[0],d=u[1],p=t.permission,f=void 0===p?[]:p,h=Object(l.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"home",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;if("403"===e||Zt.some((function(t){return t.key===e})))return e;var a=t.match(/(.*)\//g)[0].replace(/(.*)\//,"$1"),n=_t(a),o=n.tabKey;return h(o,a)}),[r]);Object(l.useEffect)((function(){var e=_t(r).tabKey,t=h(e);d(t)}),[h,r]);var b=function(e){var t=e.icon,a=e.iconfont;return i.a.createElement("div",{className:"flex items-center"},a?i.a.createElement(Ee,{type:a}):t&&i.a.createElement(t,null),i.a.createElement("span",{className:Vt.a.noselect},e.name))};function y(e){return"subMenu"===e.type?(a=(t=e).routes.reduce((function(e,t){return f.find((function(e){return t.key===e.code}))&&!t.hideInMenu?[].concat(Object(ye.a)(e),[y(t)]):e}),[])).length>0?i.a.createElement(Qt,{key:t.key,title:b(t)},a):null:function(e){return i.a.createElement(ge.a.Item,{className:Vt.a.noselect,key:e.key,title:e.name},i.a.createElement(me.b,{to:e.path},b(e)))}(e);var t,a}var g=Zt.filter((function(e){return"subMenu"===e.type})).reduce((function(e,t){return[].concat(Object(ye.a)(e),[t.key])}),[]),v=a?[]:g,E=function(){return i.a.createElement(me.b,{to:{pathname:"/"}},i.a.createElement("div",{className:"flex items-center logo"},i.a.createElement("img",{alt:"logo",src:Bt.a,width:"32"}),!a&&i.a.createElement("h1",null,"Antd多页签模板")))};return i.a.createElement(fe.a.Sider,{collapsed:a,style:{overflow:"auto",height:"100vh",position:"fixed",left:0,userSelect:"none"},width:220},i.a.createElement(E,null),i.a.createElement(ge.a,{defaultOpenKeys:v,mode:"inline",onClick:function(e){var t=e.key;d(t)},selectedKeys:[m],theme:"default"===n?"light":"dark"},function(e){return e.map((function(e){return y(e)}))}(Ft)))},Xt=a(2),$t=a.n(Xt),ea=(a(237),a(110)),ta=a(1281),aa=a(1282),na=a(1283),ra=(a(954),a(378)),oa=a(577),ca=Object(oa.a)(Ft)((function(e){var t=e.breadcrumbs,a=Object(de.e)();return i.a.createElement(ra.a,{style:{display:"inline-block"}},t.map((function(e,n){return i.a.createElement(ra.a.Item,{key:e.key},i.a.createElement(Ue.a,{disabled:!e.exact&&"/"!==e.match.path||n===t.length-1,onClick:function(){a.push(e.match.path)},style:{padding:"0"},type:"link"},e.name))})))})),la=a(187),ia=a(53),sa=a.n(ia),ua=function(){var e=Ct(),t=It(W),a=It(N),n=It((function(e){return e.app.menuMode})),o=Object(de.e)(),s=a.username,u=void 0===s?"-":s,m=u.slice(0,1),d=Object(l.useState)(!1),p=Object(be.a)(d,2),f=p[0],h=p[1],b=Object(l.useState)(!1),y=Object(be.a)(b,2),g=y[0],v=y[1],E=function(){var t=Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("user 登出",a),!a.is_oidc_user){t.next=8;break}return v(!0),t.next=5,se();case 5:e(M({})),t.next=10;break;case 8:e(M({})),o.replace({pathname:"/login"});case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=i.a.createElement(ge.a,null,i.a.createElement(ge.a.Item,{onClick:E},i.a.createElement("span",{className:"ant-btn-link"},"退出登录"),g&&i.a.createElement(pt.a,null))),k=i.a.createElement(ge.a,null,i.a.createElement(ge.a.Item,null,"布局",i.a.createElement("div",null,i.a.createElement("div",{className:sa.a.layoutCheckIndicator},i.a.createElement(la.a,{className:"block flex-1 btn ant-btn-link",icon:"tabler:layout-navbar",rotate:3,fontSize:36,color:"gray",onClick:function(){return e(D("vertical"))}}),i.a.createElement(ta.a,{className:"vertical"===n&&sa.a.checkboxItem})),i.a.createElement("div",{className:sa.a.layoutCheckIndicator},i.a.createElement(la.a,{className:"block flex-1",icon:"tabler:layout-navbar",fontSize:36,color:"gray",onClick:function(){return e(D("horizontal"))}}),i.a.createElement(ta.a,{className:"horizontal"===n&&sa.a.checkboxItem})))));return Object(l.useEffect)((function(){if("default"===t){var e=document.createElement("script");e.id="themeJs",e.src="/less.min.js",document.body.appendChild(e),setTimeout((function(){var e=document.getElementById("less:color");e&&localStorage.setItem("themeStyle",e.innerText)}),500)}else{var a=document.getElementById("themeJs"),n=document.getElementById("less:color");a&&a.remove(),n&&n.remove(),localStorage.removeItem("themeStyle")}}),[t]),i.a.createElement(fe.a.Header,{className:$t()(sa.a.header,Object(he.a)({},sa.a.horizontal,"horizontal"===n))},"vertical"===n&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:sa.a.toggleMenu,onClick:function(){h(!f),e(z(!f))}},f?i.a.createElement(aa.a,{className:sa.a.trigger}):i.a.createElement(na.a,{className:sa.a.trigger})),i.a.createElement(ca,null)),i.a.createElement(ea.a,{className:"fr ".concat(sa.a.content),overlay:j},i.a.createElement("span",{className:sa.a.user},i.a.createElement("span",{className:"avart"},m),i.a.createElement("span",null,u))),i.a.createElement(ea.a,{className:"fr ".concat(sa.a.content),overlay:k},i.a.createElement("span",{className:sa.a.preference},i.a.createElement(la.a,{icon:"emojione:gear",color:"blue"}))),i.a.createElement("div",{className:"fr ".concat(sa.a.themeSwitchWrapper)},i.a.createElement("div",{className:"".concat(sa.a.themeSwitch," ").concat("default"===t?"":sa.a.themeSwitchDark),title:"更换主题",onClick:function(){e(P("default"===t?"dark":"default"))}},i.a.createElement("div",{className:sa.a.themeSwitchInner}),i.a.createElement(la.a,{icon:"emojione:sun"}),i.a.createElement(la.a,{icon:"bi:moon-stars-fill",color:"#ffe62e"}))),i.a.createElement("div",{className:"fr ".concat(sa.a.content)},i.a.createElement("a",{href:"https://github.com/hsl947/react-antd-multi-tabs-admin",target:"_blank",rel:"noopener noreferrer",title:"view github"},i.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjQwcHgiIGhlaWdodD0iNDBweCIgdmlld0JveD0iMTIgMTIgNDAgNDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMTIgMTIgNDAgNDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiMzMzMzMzMiIGQ9Ik0zMiAxMy40Yy0xMC41IDAtMTkgOC41LTE5IDE5YzAgOC40IDUuNSAxNS41IDEzIDE4YzEgMC4yIDEuMy0wLjQgMS4zLTAuOWMwLTAuNSAwLTEuNyAwLTMuMiBjLTUuMyAxLjEtNi40LTIuNi02LjQtMi42QzIwIDQxLjYgMTguOCA0MSAxOC44IDQxYy0xLjctMS4yIDAuMS0xLjEgMC4xLTEuMWMxLjkgMC4xIDIuOSAyIDIuOSAyYzEuNyAyLjkgNC41IDIuMSA1LjUgMS42IGMwLjItMS4yIDAuNy0yLjEgMS4yLTIuNmMtNC4yLTAuNS04LjctMi4xLTguNy05LjRjMC0yLjEgMC43LTMuNyAyLTUuMWMtMC4yLTAuNS0wLjgtMi40IDAuMi01YzAgMCAxLjYtMC41IDUuMiAyIGMxLjUtMC40IDMuMS0wLjcgNC44LTAuN2MxLjYgMCAzLjMgMC4yIDQuNyAwLjdjMy42LTIuNCA1LjItMiA1LjItMmMxIDIuNiAwLjQgNC42IDAuMiA1YzEuMiAxLjMgMiAzIDIgNS4xYzAgNy4zLTQuNSA4LjktOC43IDkuNCBjMC43IDAuNiAxLjMgMS43IDEuMyAzLjVjMCAyLjYgMCA0LjYgMCA1LjJjMCAwLjUgMC40IDEuMSAxLjMgMC45YzcuNS0yLjYgMTMtOS43IDEzLTE4LjFDNTEgMjEuOSA0Mi41IDEzLjQgMzIgMTMuNHoiLz48L3N2Zz4=",alt:"github",style:{height:"26px"}}))))},ma=(a(960),a(585)),da=(a(385),a(186)),pa=a(1284),fa=a(579),ha=a.n(fa),ba=da.a.TabPane,ya=[{title:"首页",key:"home",content:Fe,closable:!1,path:"/"}],ga=function(e){var t=Ct(),a=It(w),n=It(O),o=Object(l.useState)(""),s=Object(be.a)(o,2),u=s[0],m=s[1],d=Object(l.useState)(ya),p=Object(be.a)(d,2),f=p[0],h=p[1],b=Object(l.useState)(!1),y=Object(be.a)(b,2),g=y[0],v=y[1],E=Object(l.useState)({}),j=Object(be.a)(E,2),k=j[0],C=j[1],I=Object(l.useRef)(""),M=e.defaultActiveKey,N=e.panesItem,L=e.tabActiveKey,T=Object(de.e)(),A=Object(de.f)(),z=A.pathname,P=A.search,D=z+P,W=Object(l.useCallback)((function(e){var a=e.map((function(e){return e.path}));t(x(a))}),[t]),F=Object(l.useCallback)((function(){var e=n.reduce((function(e,t){var a=_t(t),n=a.title,r=a.tabKey,o=a.component;return[].concat(Object(ye.a)(e),[{title:n,key:r,content:o,closable:"home"!==r,path:t}])}),[]),t=_t(z).tabKey;h(e),m(t)}),[n,z]);Object(l.useEffect)((function(){F()}),[F]);var R=function e(t){var a=f.findIndex((function(e){return e.key===t}));if(f.splice(a,1),t!==u){var r=u;return h(f),m(r),void W(f)}var o=n[a-1],c=_t(o).tabKey;Ut(c)||"/"===o?T.push(o):(e(c),T.push(n[a-2])),h(f),W(f)},_=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=k.path,n=k.key,T.push(t?"/":a),o=[{title:"首页",key:"home",content:Fe,closable:!1,path:"/"}],c="home"===n||t?o:[].concat(o,[k]),h(c),m(t?"home":n),W(c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){var e=z+P;if(N.path&&N.path!==I.current){I.current=e;var t=f.findIndex((function(e){return e.key===N.key}));if(!N.key||t>-1&&e===f[t].path)m(L);else{if(t>-1)return f[t].path=e,h(f),void m(L);f.push(N),h(f),m(L),W(f)}}}),[f,N,z,F,P,W,L]);var H=function(){return"home"===k.key},K=i.a.createElement(ge.a,null,i.a.createElement(ge.a.Item,{key:"1",onClick:function(){return v(!0),setTimeout((function(){v(!1)}),1e3),t(S(z+P)),void setTimeout((function(){t(S("null"))}),500)},disabled:k.path!==D},"刷新"),i.a.createElement(ge.a.Item,{key:"2",onClick:function(e){e.domEvent.stopPropagation(),R(k.key)},disabled:H()},"关闭"),i.a.createElement(ge.a.Item,{key:"3",onClick:function(e){e.domEvent.stopPropagation(),_()}},"关闭其他"),i.a.createElement(ge.a.Item,{key:"4",onClick:function(e){e.domEvent.stopPropagation(),_(!0)},disabled:H()},"全部关闭"));return i.a.createElement("div",null,i.a.createElement(da.a,{activeKey:u,className:ha.a.tabs,defaultActiveKey:M,hideAdd:!0,onChange:function(e){m(e)},onEdit:function(e,t){return"remove"===t&&R(e)},onTabClick:function(e){var t=f.filter((function(t){return t.key===e}))[0].path;T.push({pathname:t})},type:"editable-card",size:"small"},f.map((function(e){return i.a.createElement(ba,{closable:e.closable,key:e.key,tab:i.a.createElement(ea.a,{overlay:K,placement:"bottomLeft",trigger:["contextMenu"]},i.a.createElement("span",{onContextMenu:function(t){return function(e,t){e.preventDefault(),C(t)}(t,e)}},g&&e.path===D&&"/403"!==e.path&&i.a.createElement(pa.a,{title:"刷新",spin:g}),e.title))},a!==e.path?i.a.createElement(e.content,{path:e.path}):i.a.createElement("div",{style:{height:"100vh"}},i.a.createElement(ma.a,{message:"刷新中...",type:"info"})))}))))},va=a(223),Ea=a.n(va),ja=["/login"],ka=["/","/403","/test-api","/workspace"];var xa=function(){var e,t=It(N),a=It(F),n=It(R),r=Ct(),o=i.a.useState("home"),c=Object(be.a)(o,2),l=c[0],s=c[1],u=i.a.useState({title:"",content:null,key:"",closable:!1,path:""}),m=Object(be.a)(u,2),d=m[0],p=m[1],f=i.a.useRef(""),h=Object(de.e)(),b=Object(de.f)(),y=b.pathname,g=b.search,v=t.token;return i.a.useEffect((function(){if(a||r(z(document.body.clientWidth<=1366)),v||"/login"===y){var e=_t(y),t=e.tabKey,n=e.title,o=e.component;if(y===f.current||ja.includes(y))s(t);else{if(!function(e){if(ka.includes(e))return!0;var t=_t(e).tabKey;return Ut(t)}(y)){var c=_t("/403"),l=c.tabKey,i=c.title,u=c.component;return p({title:i,content:u,key:l,closable:!0,path:"/403"}),f.current="/403",s(l),void h.replace("/403")}var m=g?y+g:y;f.current=m,p({title:n,content:o,key:t,closable:"home"!==t,path:m}),s(t)}}else h.replace({pathname:"/login"})}),[h,y,g,v,r,a]),i.a.createElement(fe.a,{className:Ea.a.container,onContextMenu:function(e){return e.preventDefault()},style:{display:y.includes("/login")?"none":"flex"}},i.a.createElement(qt,{menuMode:n}),i.a.createElement(fe.a,{className:$t()(Ea.a.content,(e={},Object(he.a)(e,Ea.a.collapsed,a&&"vertical"===n),Object(he.a)(e,Ea.a.horizontal,"vertical"!==n),e))},i.a.createElement(ua,null),i.a.createElement(fe.a.Content,null,i.a.createElement(ga,{defaultActiveKey:"home",panesItem:d,tabActiveKey:l}))),i.a.createElement(pe.a,{visibilityHeight:1080}))},Sa=a(1285),Oa=(a(962),function(e){var t=e.loginCallback,a=Ct(),n=Object(l.useState)("登录第三方..."),o=Object(be.a)(n,2),s=o[0],u=o[1],m=Object(l.useState)(!1),d=Object(be.a)(m,2),p=d[0],f=d[1],h=Object(l.useState)(!1),b=Object(be.a)(h,2),y=b[0],g=b[1],v=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),u("登录中..."),e.prev=2,e.next=5,oe((function(e){return e&&a(M(e))}));case 5:g(!1),t(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),u("登录失败, 请检查网络,是否能连接认证中心:".concat($.authority));case 12:u("跳转中...");case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){ee.getUser().then((function(e){e?(u("你已登录,进入你的工作台"),f(!0)):f(!1)}))}),[]),i.a.createElement("div",{className:"login-form-logo"},p&&i.a.createElement(Ue.a,{type:"link",size:"large",shape:"round"},i.a.createElement("a",{href:"/"},s))||i.a.createElement(i.a.Fragment,null,i.a.createElement(Ue.a,{loading:y,className:"login-form-button",size:"large",type:"link",onClick:function(){return v()}},s.split("\n")),i.a.createElement(Ue.a,{className:"login-form-button",size:"large",type:"link",disabled:!0},"(第三方用户密码: bob/bob, alice/alice)")))}),wa=a(1267),Ca=[{username:"admin",password:"123456",token:"asdfghjkl",permission:[{code:"user:list:view",name:"查看用户列表"},{code:"user:list:add",name:"新增用户列表"},{code:"user:list:edit",name:"编辑用户列表"},{code:"role:list:view",name:"查看角色列表"},{code:"auth:test:view",name:"查看权限测试页"}]}],Ia=(wa.a.post("/login",(function(e,t,a){console.log("...............msw mock login.......");var n=e.body,r=n.username,o=n.password,c=Ca.find((function(e){return e.username===r&&e.password===o}));return c?(sessionStorage.setItem("mock-authenticated-token",c.token),t(a.json(c))):t(a.status(400),a.json("用户名或密码错误"))})),function(){var e=Ct(),t=It(N),a=(It(W),Object(de.e)());Object(l.useEffect)((function(){t.token?a.push("/"):e(x(["/"]))}),[a,e,t]);var n=function(){var t=Object(c.a)(r.a.mark((function t(n){var o,c,l,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=15;break;case 5:o=t.sent,e(M(o)),a.push("/"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),l=null===(c=t.t0)||void 0===c?void 0:c.response,et.a.error(l?"发生错误:".concat(l.data):"认证服务异常,请联系管理员:".concat(t.t0));case 14:return t.abrupt("return");case 15:i=Ca[0],e(M(i)),a.push("/");case 18:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}(),o=i.a.createElement(Be.a,{initialValues:{username:"admin",password:"123456"},className:"login-form",name:"login-form",onFinish:n},i.a.createElement(Be.a.Item,{name:"username",rules:[{required:!0,message:"请输入用户名"}]},i.a.createElement(Ke.a,{placeholder:"用户名",prefix:i.a.createElement(Oe.a,null),size:"large"})),i.a.createElement(Be.a.Item,{name:"password",rules:[{required:!0,message:"请输入密码"}],extra:"用户名：admin 密码：123456"},i.a.createElement(Ke.a.Password,{placeholder:"密码",prefix:i.a.createElement(Sa.a,null),size:"large"})),i.a.createElement(Be.a.Item,null,i.a.createElement(Ue.a,{className:"login-form-button",htmlType:"submit",size:"large",type:"primary"},"登录"),i.a.createElement(Oa,{loginCallback:function(){return a.push("/")}})));return i.a.createElement("div",{className:"login-layout",id:"login-layout"},i.a.createElement("div",{className:"logo-box"},i.a.createElement("img",{alt:"",className:"logo",src:Bt.a}),i.a.createElement("span",{className:"logo-name"},"React-Antd Multi-Tab")),o)}),Ma=function(){return i.a.createElement(me.a,null,i.a.createElement(de.a,{exact:!0,path:"/login",component:Ia}),i.a.createElement(de.a,{path:"/",key:"container",render:function(e){return i.a.createElement(xa,e)}}))};a(964),a(965),a(1261);V.a.locale("zh-cn"),Promise.resolve().then(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le((function(e){return e&&Y.dispatch(M(e))}));case 2:u.a.render(i.a.createElement(m.a,{store:Y},i.a.createElement(d.PersistGate,{loading:null,persistor:J},i.a.createElement(o.b,{locale:B.a},i.a.createElement(Ma,null)))),document.getElementById("root"));case 3:case"end":return e.stop()}}),e)}))))},223:function(e,t,a){e.exports={container:"container--3YiLG",menu:"menu--1B2zn",content:"content--2XZnF",collapsed:"collapsed--1sRoG",horizontal:"horizontal--2rTcH",mainContent:"mainContent--1Tr6v"}},289:function(e,t,a){e.exports=a.p+"static/media/logo.c9241552.png"},377:function(e,t,a){e.exports={noselect:"noselect--1EVpv",autoWidthMenu:"autoWidthMenu--YfmIJ"}},53:function(e,t,a){e.exports={header:"header--3fj2h",horizontal:"horizontal--xner5",content:"content--A0dCg",toggleMenu:"toggleMenu--3jyRk",themeSwitchWrapper:"themeSwitchWrapper--2ewgy",themeSwitch:"themeSwitch--16yKe",themeSwitchInner:"themeSwitchInner--2TMdl",themeSwitchDark:"themeSwitchDark--ekm-9",spin:"spin--1gpwz",layoutCheckIndicator:"layoutCheckIndicator--1sXt_",checkboxItem:"checkboxItem--2GHXp",preference:"preference--2isbH"}},579:function(e,t,a){e.exports={tabs:"tabs--2eZ24"}},587:function(e,t,a){e.exports=a(1262)},962:function(e,t,a){},964:function(e,t,a){},965:function(e,t,a){var n,r;n=this,r=function(e,t){var a;if(!t)return a="ECharts is not Loaded",void("undefined"!=typeof console&&console&&console.error&&console.error(a));t.registerTheme("dark",{color:["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],backgroundColor:"#141414",textStyle:{},title:{textStyle:{color:"#eeeeee"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"circle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#fd1050",color0:"#0cf49b",borderColor:"#fd1050",borderColor0:"#0cf49b",borderWidth:1}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaaaaa"}},symbolSize:4,symbol:"circle",smooth:!1,color:["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],label:{normal:{textStyle:{color:"#eeeeee"}}}},map:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#444444",borderWidth:.5},emphasis:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#000000"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},geo:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#444444",borderWidth:.5},emphasis:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#000000"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#eeeeee"}},axisTick:{show:!0,lineStyle:{color:"#eeeeee"}},axisLabel:{show:!0,textStyle:{color:"#eeeeee"}},splitLine:{show:!0,lineStyle:{color:["#aaaaaa"]}},splitArea:{show:!1,areaStyle:{color:["#eeeeee"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#eeeeee"}},axisTick:{show:!0,lineStyle:{color:"#eeeeee"}},axisLabel:{show:!0,textStyle:{color:"#eeeeee"}},splitLine:{show:!0,lineStyle:{color:["#aaaaaa"]}},splitArea:{show:!1,areaStyle:{color:["#eeeeee"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#eeeeee"}},axisTick:{show:!0,lineStyle:{color:"#eeeeee"}},axisLabel:{show:!0,textStyle:{color:"#eeeeee"}},splitLine:{show:!0,lineStyle:{color:["#aaaaaa"]}},splitArea:{show:!1,areaStyle:{color:["#eeeeee"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#eeeeee"}},axisTick:{show:!0,lineStyle:{color:"#eeeeee"}},axisLabel:{show:!0,textStyle:{color:"#eeeeee"}},splitLine:{show:!0,lineStyle:{color:["#aaaaaa"]}},splitArea:{show:!1,areaStyle:{color:["#eeeeee"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#eeeeee"}},tooltip:{axisPointer:{lineStyle:{color:"#eeeeee",width:"1"},crossStyle:{color:"#eeeeee",width:"1"}}},timeline:{lineStyle:{color:"#eeeeee",width:1},itemStyle:{normal:{color:"#dd6b66",borderWidth:1},emphasis:{color:"#a9334c"}},controlStyle:{normal:{color:"#eeeeee",borderColor:"#eeeeee",borderWidth:.5},emphasis:{color:"#eeeeee",borderColor:"#eeeeee",borderWidth:.5}},checkpointStyle:{color:"#e43c59",borderColor:"rgba(194,53,49,0.5)"},label:{normal:{textStyle:{color:"#eeeeee"}},emphasis:{textStyle:{color:"#eeeeee"}}}},visualMap:{color:["#bf444c","#d88273","#f6efa6"]},dataZoom:{backgroundColor:"rgba(47,69,84,0)",dataBackgroundColor:"rgba(255,255,255,0.3)",fillerColor:"rgba(167,183,204,0.4)",handleColor:"#a7b7cc",handleSize:"100%",textStyle:{color:"#eeeeee"}},markPoint:{label:{normal:{textStyle:{color:"#eeeeee"}},emphasis:{textStyle:{color:"#eeeeee"}}}}})},"string"!=typeof t.nodeName?r(0,a(966)):r(0,n.echarts)}});